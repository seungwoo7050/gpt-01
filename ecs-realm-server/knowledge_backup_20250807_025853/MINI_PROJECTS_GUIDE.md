# ê²Œì„ ì„œë²„ ë¯¸ë‹ˆ í”„ë¡œì íŠ¸ ê°€ì´ë“œ

## ğŸ¯ ì´ ë¬¸ì„œì˜ ëª©ì 

ê° í•™ìŠµ ë‹¨ê³„ë³„ë¡œ ì‹¤ìŠµí•  ìˆ˜ ìˆëŠ” ë¯¸ë‹ˆ í”„ë¡œì íŠ¸ë¥¼ ì œê³µí•˜ì—¬ ì´ë¡ ì„ ì‹¤ì œ ì½”ë“œë¡œ êµ¬í˜„í•˜ëŠ” ëŠ¥ë ¥ì„ ê¸°ë¦…ë‹ˆë‹¤.

## ğŸš€ í”„ë¡œì íŠ¸ ë‚œì´ë„
- â­ **ì‰¬ì›€**: 1-2ì¼ ì†Œìš”
- â­â­ **ë³´í†µ**: 3-5ì¼ ì†Œìš”
- â­â­â­ **ì–´ë ¤ì›€**: 1ì£¼ì¼ ì´ìƒ ì†Œìš”

---

## Phase 1: ê¸°ì´ˆ í”„ë¡œì íŠ¸

### í”„ë¡œì íŠ¸ 1: TCP ì—ì½” ì„œë²„ â­
**ëª©í‘œ**: ë„¤íŠ¸ì›Œí¬ í”„ë¡œê·¸ë˜ë° ê¸°ì´ˆ ì´í•´

**ìš”êµ¬ì‚¬í•­**:
```cpp
// 1. í¬íŠ¸ 9999ì—ì„œ ë¦¬ìŠ¤ë‹
// 2. í´ë¼ì´ì–¸íŠ¸ ë©”ì‹œì§€ë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜
// 3. ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ ë™ì‹œ ì²˜ë¦¬ (select ì‚¬ìš©)
// 4. ì—°ê²°/í•´ì œ ë¡œê·¸ ì¶œë ¥
```

**êµ¬í˜„ íŒíŠ¸**:
```cpp
class EchoServer {
    int listen_fd;
    fd_set master_set;
    
public:
    void Start(int port) {
        // 1. ì†Œì¼“ ìƒì„± ë° ë°”ì¸ë“œ
        // 2. select()ë¡œ ì´ë²¤íŠ¸ ëŒ€ê¸°
        // 3. ìƒˆ ì—°ê²°ì€ accept()
        // 4. ë°ì´í„°ëŠ” recv() â†’ send()
    }
};
```

**í‰ê°€ ê¸°ì¤€**:
- [ ] ë™ì‹œì— 10ê°œ í´ë¼ì´ì–¸íŠ¸ ì²˜ë¦¬
- [ ] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì—†ìŒ
- [ ] ì •ìƒì ì¸ ì¢…ë£Œ ì²˜ë¦¬

### í”„ë¡œì íŠ¸ 2: ë©€í‹°ìŠ¤ë ˆë“œ ì±„íŒ… ì„œë²„ â­â­
**ëª©í‘œ**: ìŠ¤ë ˆë“œì™€ ë™ê¸°í™” ì´í•´

**ìš”êµ¬ì‚¬í•­**:
```cpp
// 1. ê° í´ë¼ì´ì–¸íŠ¸ë³„ ìŠ¤ë ˆë“œ ìƒì„±
// 2. ë‹‰ë„¤ì„ ì„¤ì • ê¸°ëŠ¥
// 3. ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë©”ì‹œì§€
// 4. /list, /whisper ëª…ë ¹ì–´
// 5. ìŠ¤ë ˆë“œ ì•ˆì „í•œ êµ¬í˜„
```

**êµ¬ì¡° ì„¤ê³„**:
```cpp
class ChatServer {
    std::map<int, ClientInfo> clients;
    std::mutex clients_mutex;
    
    struct ClientInfo {
        int socket;
        std::string nickname;
        std::thread handler_thread;
    };
    
    void HandleClient(int client_socket) {
        // í´ë¼ì´ì–¸íŠ¸ë³„ ì²˜ë¦¬ ë¡œì§
    }
    
    void Broadcast(const std::string& message) {
        std::lock_guard<std::mutex> lock(clients_mutex);
        // ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ì†¡
    }
};
```

**í‰ê°€ ê¸°ì¤€**:
- [ ] ê²½ìŸ ìƒíƒœ ì—†ìŒ
- [ ] ë°ë“œë½ ì—†ìŒ
- [ ] 50ëª… ë™ì‹œ ì±„íŒ… ê°€ëŠ¥

### í”„ë¡œì íŠ¸ 3: ê²Œì„ í‹± ì‹œë®¬ë ˆì´í„° â­â­
**ëª©í‘œ**: ê²Œì„ ë£¨í”„ì™€ í‹± ì‹œìŠ¤í…œ ì´í•´

**ìš”êµ¬ì‚¬í•­**:
```cpp
// 1. 30 TPS (Tick Per Second) êµ¬í˜„
// 2. í”Œë ˆì´ì–´ ì´ë™ ì‹œë®¬ë ˆì´ì…˜
// 3. í‹± ì§€ì—° ì‹œ ë”°ë¼ì¡ê¸°
// 4. ì„±ëŠ¥ í†µê³„ ì¶œë ¥
```

**í•µì‹¬ êµ¬í˜„**:
```cpp
class GameLoop {
    static constexpr int TARGET_TPS = 30;
    static constexpr auto TICK_DURATION = std::chrono::milliseconds(1000 / TARGET_TPS);
    
    void Run() {
        auto next_tick = std::chrono::steady_clock::now();
        
        while (running) {
            auto now = std::chrono::steady_clock::now();
            
            // í‹± ì²˜ë¦¬
            ProcessTick();
            
            // ë‹¤ìŒ í‹±ê¹Œì§€ ëŒ€ê¸°
            next_tick += TICK_DURATION;
            std::this_thread::sleep_until(next_tick);
            
            // ì§€ì—°ëœ ê²½ìš° ë”°ë¼ì¡ê¸°
            if (now > next_tick) {
                // ìŠ¤í‚µëœ í‹± ì²˜ë¦¬
            }
        }
    }
};
```

---

## Phase 2: ì•„í‚¤í…ì²˜ í”„ë¡œì íŠ¸

### í”„ë¡œì íŠ¸ 4: ë¯¸ë‹ˆ ECS ì—”ì§„ â­â­â­
**ëª©í‘œ**: Entity-Component-System êµ¬í˜„

**ìš”êµ¬ì‚¬í•­**:
```cpp
// 1. Entity = ID
// 2. Component = ìˆœìˆ˜ ë°ì´í„°
// 3. System = ë¡œì§ ì²˜ë¦¬
// 4. 1000ê°œ ì—”í‹°í‹° ì²˜ë¦¬
```

**êµ¬í˜„ ì˜ˆì œ**:
```cpp
// Components
struct PositionComponent {
    float x, y, z;
};

struct VelocityComponent {
    float vx, vy, vz;
};

// System
class MovementSystem {
    void Update(float deltaTime) {
        // PositionComponent + VelocityComponentë¥¼ ê°€ì§„ ì—”í‹°í‹° ì²˜ë¦¬
        for (auto entity : GetEntitiesWithComponents<PositionComponent, VelocityComponent>()) {
            auto& pos = GetComponent<PositionComponent>(entity);
            auto& vel = GetComponent<VelocityComponent>(entity);
            
            pos.x += vel.vx * deltaTime;
            pos.y += vel.vy * deltaTime;
            pos.z += vel.vz * deltaTime;
        }
    }
};
```

**í‰ê°€ ê¸°ì¤€**:
- [ ] ì»´í¬ë„ŒíŠ¸ ë™ì  ì¶”ê°€/ì œê±°
- [ ] ì‹œìŠ¤í…œ ì‹¤í–‰ ìˆœì„œ ì œì–´
- [ ] ë©”ëª¨ë¦¬ íš¨ìœ¨ì  ì €ì¥

### í”„ë¡œì íŠ¸ 5: ë¡œê·¸ì¸ ì„œë²„ ë¶„ë¦¬ â­â­
**ëª©í‘œ**: ì„œë²„ ì•„í‚¤í…ì²˜ ë¶„ë¦¬

**ìš”êµ¬ì‚¬í•­**:
```cpp
// 1. ë¡œê·¸ì¸ ì„œë²„ (í¬íŠ¸ 8080)
// 2. ê²Œì„ ì„œë²„ (í¬íŠ¸ 8081)
// 3. Redisë¥¼ í†µí•œ ì„¸ì…˜ ê³µìœ 
// 4. JWT í† í° ì¸ì¦
```

**ì•„í‚¤í…ì²˜**:
```
[í´ë¼ì´ì–¸íŠ¸] â†’ [ë¡œê·¸ì¸ ì„œë²„] â†’ [Redis]
     â†“                             â†‘
[ê²Œì„ ì„œë²„] â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**êµ¬í˜„ í¬ì¸íŠ¸**:
```cpp
// ë¡œê·¸ì¸ ì„œë²„
class LoginServer {
    void HandleLogin(const LoginRequest& req) {
        // 1. DBì—ì„œ ì‚¬ìš©ì í™•ì¸
        // 2. JWT í† í° ìƒì„±
        // 3. Redisì— ì„¸ì…˜ ì €ì¥
        // 4. í† í° ë°˜í™˜
    }
};

// ê²Œì„ ì„œë²„
class GameServer {
    void ValidateSession(const std::string& token) {
        // 1. JWT ê²€ì¦
        // 2. Redisì—ì„œ ì„¸ì…˜ í™•ì¸
        // 3. ê²Œì„ ì…ì¥ í—ˆìš©
    }
};
```

### í”„ë¡œì íŠ¸ 6: ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ â­â­
**ëª©í‘œ**: ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ êµ¬í˜„

**ìš”êµ¬ì‚¬í•­**:
```cpp
// 1. ì´ë²¤íŠ¸ ë°œí–‰/êµ¬ë… íŒ¨í„´
// 2. ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì²˜ë¦¬
// 3. ì´ë²¤íŠ¸ ìš°ì„ ìˆœìœ„
// 4. ì´ë²¤íŠ¸ ë¡œê¹…
```

**êµ¬í˜„ ì˜ˆì œ**:
```cpp
template<typename EventType>
class EventBus {
    using Handler = std::function<void(const EventType&)>;
    std::vector<Handler> handlers;
    
public:
    void Subscribe(Handler handler) {
        handlers.push_back(handler);
    }
    
    void Publish(const EventType& event) {
        for (auto& handler : handlers) {
            handler(event);
        }
    }
};

// ì‚¬ìš© ì˜ˆ
struct PlayerJoinEvent {
    uint64_t player_id;
    std::string nickname;
};

EventBus<PlayerJoinEvent> join_bus;
join_bus.Subscribe([](const PlayerJoinEvent& e) {
    std::cout << e.nickname << " joined!" << std::endl;
});
```

---

## Phase 3: ì„±ëŠ¥ í”„ë¡œì íŠ¸

### í”„ë¡œì íŠ¸ 7: Lock-Free í â­â­â­
**ëª©í‘œ**: ê³ ì„±ëŠ¥ ë™ì‹œì„± êµ¬í˜„

**ìš”êµ¬ì‚¬í•­**:
```cpp
// 1. Compare-And-Swap ì‚¬ìš©
// 2. ABA ë¬¸ì œ í•´ê²°
// 3. ë©”ëª¨ë¦¬ ìˆœì„œ ë³´ì¥
// 4. ë²¤ì¹˜ë§ˆí¬ êµ¬í˜„
```

**ê¸°ë³¸ êµ¬ì¡°**:
```cpp
template<typename T>
class LockFreeQueue {
    struct Node {
        std::atomic<T*> data;
        std::atomic<Node*> next;
    };
    
    std::atomic<Node*> head;
    std::atomic<Node*> tail;
    
public:
    void Enqueue(T item) {
        Node* new_node = new Node{new T(std::move(item)), nullptr};
        Node* prev_tail = tail.exchange(new_node);
        prev_tail->next.store(new_node);
    }
    
    std::optional<T> Dequeue() {
        // CAS ë£¨í”„ë¡œ êµ¬í˜„
    }
};
```

### í”„ë¡œì íŠ¸ 8: 10K ë™ì‹œì ‘ì† ì„œë²„ â­â­â­
**ëª©í‘œ**: ëŒ€ê·œëª¨ ë™ì‹œì ‘ì† ì²˜ë¦¬

**ìš”êµ¬ì‚¬í•­**:
```cpp
// 1. epoll/IOCP ì‚¬ìš©
// 2. ë©”ëª¨ë¦¬ í’€ êµ¬í˜„
// 3. ì œë¡œ ì¹´í”¼ ìµœì í™”
// 4. ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
```

**ìµœì í™” í¬ì¸íŠ¸**:
- ê°ì²´ í’€ë§
- ë²„í¼ ì¬ì‚¬ìš©
- ì‹œìŠ¤í…œ ì½œ ìµœì†Œí™”
- CPU ìºì‹œ ìµœì í™”

### í”„ë¡œì íŠ¸ 9: ë¶„ì‚° ìºì‹œ ì‹œìŠ¤í…œ â­â­â­
**ëª©í‘œ**: Redis í´ëŸ¬ìŠ¤í„° í™œìš©

**ìš”êµ¬ì‚¬í•­**:
```cpp
// 1. ì¼ê´€ëœ í•´ì‹±
// 2. ìºì‹œ ë¬´íš¨í™” ì „ëµ
// 3. í•« í‚¤ ì²˜ë¦¬
// 4. ì¥ì•  ë³µêµ¬
```

---

## Phase 4: ì‹¤ì „ í”„ë¡œì íŠ¸

### í”„ë¡œì íŠ¸ 10: ë¯¸ë‹ˆ MMORPG â­â­â­
**ëª©í‘œ**: ì™„ì „í•œ ê²Œì„ ì„œë²„ êµ¬í˜„

**í•µì‹¬ ê¸°ëŠ¥**:
1. **ìºë¦­í„° ì‹œìŠ¤í…œ**
   - ì´ë™, ì „íˆ¬, ë ˆë²¨ì—…
   - ì¸ë²¤í† ë¦¬, ì¥ë¹„

2. **ì›”ë“œ ì‹œìŠ¤í…œ**
   - ë§µ ë¡œë”©, ì¸ìŠ¤í„´ìŠ¤
   - NPC, ëª¬ìŠ¤í„° AI

3. **ì†Œì…œ ì‹œìŠ¤í…œ**
   - íŒŒí‹°, ê¸¸ë“œ
   - ì±„íŒ…, ê±°ë˜

4. **ì „íˆ¬ ì‹œìŠ¤í…œ**
   - ìŠ¤í‚¬, ë²„í”„/ë””ë²„í”„
   - PvP, PvE

**ì•„í‚¤í…ì²˜**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Login Server â”‚     â”‚ Game Server â”‚     â”‚ Chat Server â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚                    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚    Redis    â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚    MySQL    â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š í”„ë¡œì íŠ¸ í‰ê°€ ê¸°ì¤€

### ì½”ë“œ í’ˆì§ˆ
- [ ] í´ë¦° ì½”ë“œ ì›ì¹™ ì¤€ìˆ˜
- [ ] ì ì ˆí•œ ì£¼ì„ê³¼ ë¬¸ì„œí™”
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] ì—ëŸ¬ ì²˜ë¦¬ ì™„ë²½

### ì„±ëŠ¥
- [ ] ëª©í‘œ ë™ì‹œì ‘ì† ë‹¬ì„±
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”
- [ ] CPU ì‚¬ìš©ë¥  ì ì •
- [ ] ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ íš¨ìœ¨

### í™•ì¥ì„±
- [ ] ëª¨ë“ˆí™”ëœ ì„¤ê³„
- [ ] ìˆ˜í‰ì  í™•ì¥ ê°€ëŠ¥
- [ ] ì„¤ì • íŒŒì¼ ë¶„ë¦¬
- [ ] í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ

## ğŸ“ í•™ìŠµ íŒ

### í”„ë¡œì íŠ¸ ì§„í–‰ ë°©ë²•
1. **ìš”êµ¬ì‚¬í•­ ë¶„ì„** â†’ ë¬´ì—‡ì„ ë§Œë“¤ ê²ƒì¸ê°€?
2. **ì„¤ê³„** â†’ ì–´ë–»ê²Œ ë§Œë“¤ ê²ƒì¸ê°€?
3. **êµ¬í˜„** â†’ ë‹¨ê³„ë³„ë¡œ ê°œë°œ
4. **í…ŒìŠ¤íŠ¸** â†’ ë¶€í•˜ í…ŒìŠ¤íŠ¸ í•„ìˆ˜
5. **ìµœì í™”** â†’ ë³‘ëª© ì§€ì  ê°œì„ 

### ë””ë²„ê¹… íŒ
```cpp
// ì„±ëŠ¥ ì¸¡ì • ë§¤í¬ë¡œ
#define MEASURE_TIME(name, code) \
    do { \
        auto start = std::chrono::high_resolution_clock::now(); \
        code \
        auto end = std::chrono::high_resolution_clock::now(); \
        auto duration = std::chrono::duration_cast<std::chrono::microseconds>(end - start); \
        std::cout << name << ": " << duration.count() << "Î¼s" << std::endl; \
    } while(0)

// ì‚¬ìš© ì˜ˆ
MEASURE_TIME("Database Query", {
    auto result = db.Query("SELECT * FROM users");
});
```

---

ğŸ’¡ **Remember**: ì™„ë²½í•œ ì½”ë“œë³´ë‹¤ ë™ì‘í•˜ëŠ” ì½”ë“œë¥¼ ë¨¼ì € ë§Œë“œì„¸ìš”. ê·¸ ë‹¤ìŒ ê°œì„ í•˜ì„¸ìš”!