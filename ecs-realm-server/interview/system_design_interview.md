# 시스템 디자인 면접 질문

## 1. 대규모 게임 서버 설계

### Q: 동시접속 10만명을 지원하는 MMORPG 서버를 설계하세요.

**답변 포인트:**
- **서버 구조**: 분산 서버 아키텍처
  - 로그인 서버
  - 월드 서버 (지역별 분산)
  - 채팅 서버
  - DB 서버 클러스터
  - 캐시 서버 (Redis)

- **확장성 전략**:
  - 수평적 확장: 월드를 여러 서버에 분산
  - 샤딩: 유저 ID 기반 DB 샤딩
  - 로드 밸런싱: L4/L7 스위치 활용

- **데이터 일관성**:
  - 이벤트 소싱 패턴
  - 분산 트랜잭션 최소화
  - 최종 일관성 모델 적용

### Q: 실시간 배틀로얄 게임의 매칭 시스템을 설계하세요.

**답변 포인트:**
- **매칭 알고리즘**:
  - ELO/MMR 기반 스킬 매칭
  - 지역 기반 핑 최적화
  - 대기 시간에 따른 매칭 범위 확대

- **시스템 구성**:
  - 매칭 큐 서버 (Redis Sorted Set)
  - 매치메이킹 워커
  - 게임 서버 풀 관리자

- **최적화**:
  - 배치 처리로 매칭 효율 향상
  - 예상 대기 시간 계산
  - 동적 서버 스케일링

## 2. 실시간 시스템 설계

### Q: 1초에 1000건의 거래가 발생하는 게임 경매장을 설계하세요.

**답변 포인트:**
- **아키텍처**:
  - CQRS 패턴 적용
  - 이벤트 스트림 처리 (Kafka)
  - 읽기 전용 레플리카

- **동시성 제어**:
  - 낙관적 락 vs 비관적 락
  - 분산 락 (Redis/Zookeeper)
  - 트랜잭션 격리 수준

- **성능 최적화**:
  - 인메모리 캐싱
  - 배치 처리
  - 인덱스 최적화

### Q: 글로벌 서비스를 위한 CDN과 엣지 서버를 설계하세요.

**답변 포인트:**
- **지역별 배포**:
  - GeoDNS 활용
  - 엣지 서버 위치 선정
  - 지역별 데이터 센터

- **데이터 동기화**:
  - 마스터-슬레이브 복제
  - 지역별 캐시 전략
  - 일관성과 가용성 트레이드오프

## 3. 장애 대응 설계

### Q: 서버 장애 시 자동 복구 시스템을 설계하세요.

**답변 포인트:**
- **모니터링**:
  - Health Check
  - 메트릭 수집 (CPU, Memory, Network)
  - 알림 시스템

- **자동 복구**:
  - Circuit Breaker 패턴
  - 자동 재시작
  - 트래픽 우회

- **장애 격리**:
  - Bulkhead 패턴
  - 타임아웃 설정
  - 폴백 메커니즘

## 4. 데이터베이스 설계

### Q: 게임 내 친구 시스템의 DB를 설계하세요.

**답변 포인트:**
- **스키마 설계**:
  ```sql
  -- 친구 관계 테이블
  CREATE TABLE friendships (
    user_id BIGINT,
    friend_id BIGINT,
    status ENUM('pending', 'accepted', 'blocked'),
    created_at TIMESTAMP,
    PRIMARY KEY (user_id, friend_id),
    INDEX idx_friend_lookup (friend_id, user_id)
  );
  ```

- **쿼리 최적화**:
  - 양방향 인덱스
  - 파티셔닝 전략
  - 캐싱 레이어

- **확장성**:
  - 샤딩 키 선택
  - 읽기/쓰기 분리
  - NoSQL 고려사항

## 5. 보안 설계

### Q: 게임 서버의 DDoS 방어 시스템을 설계하세요.

**답변 포인트:**
- **네트워크 레벨**:
  - Rate Limiting
  - IP 블랙리스트
  - SYN Flood 방어

- **애플리케이션 레벨**:
  - API 쓰로틀링
  - 캡차 시스템
  - 행동 패턴 분석

- **인프라**:
  - CDN 활용
  - 오토 스케일링
  - 트래픽 분산

## 면접관이 주목하는 포인트

1. **트레이드오프 인식**: 완벽한 솔루션은 없다
2. **점진적 개선**: MVP부터 시작해서 확장
3. **수치로 설명**: 구체적인 용량 계산
4. **실무 경험**: 실제 겪은 문제와 해결책
5. **최신 기술**: 현재 트렌드 이해도